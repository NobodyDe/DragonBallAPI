(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();async function x(r,e=4,o=2e3){for(let a=0;a<e;a++)try{return await r()}catch(t){if(a===e-1)throw console.error(`Falha apÃ³s ${e} tentativas:`,t),t;console.warn(`Tentativa ${a+1} falhou. Tentando novamente em ${o}ms...`),await new Promise(n=>setInterval(n,o))}}const c=document.querySelector(".container-cards"),I=document.querySelector(".searchBar"),m=document.querySelector("#searchInput"),p=document.querySelector(".alertNotFoundHidden");let l=null,d=!0,u=[];function s(r,e={},o=[]){const{text:a,...t}=e,n=document.createElement(r);return Object.entries(t).forEach(i=>{n.setAttribute(...i)}),a&&(n.innerText=a),o&&n.append(...o),n}async function f(r){for(const e of r){const o=[["info","base KI:"],["label",e.ki],["info","Total KI:"],["label",e.maxKi],["info","Afilliation"],["label",e.affiliation]].map(([v,L])=>s("div",{class:v,text:L})),a=s("div",{class:"label-subtitle",text:`${e.race} - ${e.gender}`}),t=s("h1",{class:"title",text:e.name}),n=s("div",{class:"card-title"},[t,a]),i=s("div",{class:"card-info"},[n,...o]),y=s("img",{src:e.image,alt:"Imagem do personagem",class:"image"}),w=s("div",{class:"card-image"},[y]),b=s("div",{class:"card"},[w,i]);c.appendChild(b)}}async function N(r){return await(await fetch(r)).json()}async function h(){const r=l?.links?.next||"https://dragonball-api.com/api/characters?limit=10",e=await x(()=>N(r),4);l=e,u=[...u,...e.items],f(e.items)}async function S(){m.addEventListener("input",r=>{p.setAttribute("class","alertNotFoundHidden"),r.target.value===""&&(c.innerHTML="",f(u),d=!0)}),I.addEventListener("submit",async r=>{r.preventDefault();const e=await g(m.value);e.length>0&&(c.innerHTML="",f(e),d=!1)})}async function g(r,e="https://dragonball-api.com/api/characters?limit=10"){let a=await(await fetch(e)).json(),t=a.items.filter(n=>n.name.toLowerCase().includes(r.toLowerCase()));if(t.length>0)return t;if(a.links.next)return g(r,e=a.links.next);p.setAttribute("class","alertNotFoundDisplayed")}function C(){window.addEventListener("scroll",async()=>{if(d){const r=window.scrollY+window.innerHeight,e=document.documentElement.scrollHeight;r>=e&&l?.links?.next&&await h()}})}S();h();C();
